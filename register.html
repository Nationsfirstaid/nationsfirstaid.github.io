<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Register – Nations First Aid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="center">
    <img class="watermark" src="logos/RedPNG_76c2cae5-c477-4636-b41a-881bb9e091a5.png" alt="Red Watermark" />
    <img class="logo" src="logos/White_PNG_74dcf535-3999-4f0a-b1fa-bbcebd79a35c.png" alt="Nations First Aid Logo" />
    <div class="site-name">NATIONS FIRST AID</div>

    <div class="nav-btns">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="courses.html">Courses</a>
      <a href="register.html">Register</a>
      <a href="contact.html">Contact</a>
    </div>

    <main style="max-width: 500px; margin: 0 auto; background: rgba(255,255,255,0.04); border-radius: 12px; padding: 28px 16px 20px 16px;">
      <h2 style="color:#fff; text-align:center; margin-bottom: 16px;">Register for a Class</h2>

      <form action="https://formsubmit.co/nationsfirstaid@mail.com" method="POST" id="registerForm">
        <input type="hidden" name="_captcha" value="false">
        <input type="text" name="honeypot" style="display:none" tabindex="-1" autocomplete="off" />

        <label for="name">Full Name</label><br>
        <input type="text" id="name" name="name" required style="width:100%;padding:8px;"><br><br>

        <label for="email">Email Address</label><br>
        <input type="email" id="email" name="email" required style="width:100%;padding:8px;"><br><br>

        <label for="phone">Phone Number</label><br>
        <input type="tel" id="phone" name="phone" required style="width:100%;padding:8px;"><br><br>

        <!-- Verification Section -->
        <div id="verification-section">
          <label>Verify Phone Number</label><br>
          <button type="button" id="send-code-btn" style="margin-top: 6px; padding: 6px 12px;">Send Code</button><br><br>

          <div id="code-box" style="display:none;">
            <label for="code-input">Enter 4-digit Code</label><br>
            <input type="text" id="code-input" maxlength="4" style="width:100%;padding:8px;" /><br><br>
            <button type="button" id="verify-btn" style="padding: 6px 12px;">Verify Code</button>
            <p id="code-status" style="color:#fff; margin-top: 10px;"></p>
          </div>
        </div>

        <!-- Course and remaining form: hidden until code is verified -->
        <div id="course-section" style="display:none;">
          <label for="course">Course Interested In</label><br>
          <select id="course" name="course" required style="width:100%;padding:8px;">
            <option value="">-- Select a course --</option>
            <option value="Standard First Aid (SFA) with CPR/AED Level C – 2 day">Standard First Aid (SFA) with CPR/AED Level C – 2 day</option>
            <option value="Standard First Aid (SFA) with CPR/AED Level C – Blended">Standard First Aid (SFA) with CPR/AED Level C – Blended</option>
            <option value="Standard First Aid (SFA) with CPR/AED Level C – RECERTIFICATION">Standard First Aid (SFA) with CPR/AED Level C – RECERTIFICATION</option>
            <option value="Emergency First Aid (EFA) with CPR/AED Level C">Emergency First Aid (EFA) with CPR/AED Level C</option>
            <option value="Marine Basic First Aid (MBFA)">Marine Basic First Aid (MBFA)</option>
            <option value="CPR/AED Level C">CPR/AED Level C</option>
          </select><br><br>

          <label for="start-date">Preferred Start Date</label><br>
          <input type="date" id="start-date" name="start-date" required style="width:100%;padding:8px;"><br><br>

          <label for="end-date">Desired Certification By</label><br>
          <input type="date" id="end-date" name="end-date" required style="width:100%;padding:8px;"><br><br>

          <label for="message">Message</label><br>
          <textarea id="message" name="message" rows="3" required style="width:100%;padding:8px;"></textarea><br><br>
        </div>

        <button type="submit" class="cta" style="width:100%;padding:12px 0;font-size:1.1rem;">Submit Registration</button>
      </form>

      <br>
      <div style="margin: 18px 0 0 0; color:#fff; text-align:center; font-size:1.09rem;">
        We welcome both public and private group training requests.<br>
        Classes and scheduling are emailed to students upon registration and request of date/certification needed.
      </div>
    </main>
  </div>

  <footer>
    <div class="disclaimer">
      &copy; 2025 Nations First Aid. All rights reserved.<br>
      All images, logos, and illustrations on this site are the exclusive property of Nations First Aid and its creator.<br>
      Unauthorized reproduction, distribution, or commercial use is strictly prohibited. Use of Indigenous imagery and symbols is with respect for cultural significance and community tradition.
    </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const startDateInput = document.getElementById("start-date");
      const endDateInput = document.getElementById("end-date");
      const courseSection = document.getElementById("course-section");

      const today = new Date();
      const sixtyDaysLater = new Date(today);
      sixtyDaysLater.setDate(today.getDate() + 60);

      function formatDate(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      }

      // Start date limits
      startDateInput.min = formatDate(today);
      startDateInput.max = formatDate(sixtyDaysLater);
      startDateInput.value = formatDate(today);

      // Update end date range based on start date
      function updateEndDateRange() {
        const startDate = new Date(startDateInput.value);
        const maxDate = new Date(startDate);
        maxDate.setDate(startDate.getDate() + 60);

        endDateInput.min = formatDate(startDate);
        endDateInput.max = formatDate(maxDate);

        const currentEnd = new Date(endDateInput.value);
        if (currentEnd < startDate || currentEnd > maxDate) {
          endDateInput.value = formatDate(maxDate);
        }
      }

      startDateInput.addEventListener("change", updateEndDateRange);
      updateEndDateRange();

      // Bot protection
      document.getElementById("registerForm").addEventListener("submit", function (e) {
        const honeypot = document.querySelector("input[name='honeypot']").value;
        if (honeypot !== "") {
          e.preventDefault();
          alert("Bot submission blocked.");
        }
      });

      // Code verification logic
      let generatedCode = "";

      document.getElementById("send-code-btn").addEventListener("click", function () {
        generatedCode = Math.floor(1000 + Math.random() * 9000).toString();
        document.getElementById("code-box").style.display = "block";
        document.getElementById("code-status").innerText = `Your code is: ${generatedCode}`;
      });

      document.getElementById("verify-btn").addEventListener("click", function () {
        const entered = document.getElementById("code-input").value;
        if (entered === generatedCode) {
          document.getElementById("code-status").innerText = "✅ Code Verified!";
          courseSection.style.display = "block";
        } else {
          document.getElementById("code-status").innerText = "❌ Incorrect Code. Try Again.";
        }
      });
    });
  </script>
</body>
</html>
